@import 'tailwindcss/theme';
@import '../components/backgrounds/backgrounds.css';
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    color-scheme: light;
    --background: 220 35% 98%;
    --surface-1: 220 26% 96%;
    --surface-2: 222 20% 94%;
    --surface-3: 221 18% 91%;
    --surface: var(--surface-1);
    --foreground: 222 42% 12%;
    --muted: 222 18% 88%;
    --muted-foreground: 224 20% 36%;
    --primary: 221 89% 56%;
    --primary-foreground: 214 33% 98%;
    --primary-soft: 221 89% 64%;
    --secondary: 193 76% 44%;
    --secondary-foreground: 189 45% 96%;
    --accent: 266 76% 64%;
    --accent-foreground: 268 92% 14%;
    --accent-green: 154 68% 46%;
    --accent-green-foreground: 156 94% 14%;
    --accent-pink: 330 80% 68%;
    --accent-pink-foreground: 335 92% 14%;
    --accent-purple: 274 74% 62%;
    --accent-purple-foreground: 275 94% 14%;
    --success: 158 64% 42%;
    --warning: 36 92% 54%;
    --danger: 0 72% 52%;
    --danger-foreground: 0 0% 98%;
    --border: 223 18% 82%;
    --input: 223 18% 82%;
    --ring: 221 89% 56%;
    --card: var(--surface-2);
    --card-foreground: var(--foreground);
    --popover: var(--surface-1);
    --popover-foreground: var(--foreground);
    --shadow-soft: 0 28px 80px -36px rgba(20, 24, 45, 0.32);
    --shadow-glow: 0 0 32px rgba(93, 95, 255, 0.3);
    --shadow-focus: 0 0 0 4px rgba(79, 70, 229, 0.18);
    --radius-sm: 8px;
    --radius-md: 14px;
    --radius-lg: 22px;
    --radius-xl: 28px;
    --radius: var(--radius-md);
    --terminal-green: 133 84% 62%;
    --terminal-amber: 44 97% 58%;
    --terminal-blue: 186 86% 62%;
    --terminal-red: 0 78% 58%;
    --terminal-bg: 120 14% 8%;
  }

  .dark,
  [data-theme='dark'] {
    color-scheme: dark;
    --background: 222 26% 10%;
    --surface-1: 224 24% 12%;
    --surface-2: 224 22% 14%;
    --surface-3: 224 18% 18%;
    --surface: var(--surface-1);
    --foreground: 214 32% 92%;
    --muted: 223 16% 22%;
    --muted-foreground: 217 18% 76%;
    --primary: 218 93% 68%;
    --primary-foreground: 222 34% 12%;
    --primary-soft: 218 92% 62%;
    --secondary: 187 65% 50%;
    --secondary-foreground: 188 36% 12%;
    --accent: 268 82% 74%;
    --accent-foreground: 265 86% 12%;
    --accent-green: 151 70% 58%;
    --accent-green-foreground: 153 36% 12%;
    --accent-pink: 332 88% 72%;
    --accent-pink-foreground: 334 40% 14%;
    --accent-purple: 272 78% 72%;
    --accent-purple-foreground: 273 38% 14%;
    --success: 151 60% 46%;
    --warning: 36 92% 58%;
    --danger: 0 70% 60%;
    --danger-foreground: 0 0% 98%;
    --border: 224 18% 26%;
    --input: 224 18% 26%;
    --ring: 218 93% 68%;
    --card: var(--surface-2);
    --card-foreground: var(--foreground);
    --popover: var(--surface-1);
    --popover-foreground: var(--foreground);
    --shadow-soft: 0 24px 70px -32px rgba(0, 0, 0, 0.5);
    --shadow-glow: 0 0 32px rgba(77, 109, 255, 0.25);
    --shadow-focus: 0 0 0 4px rgba(147, 197, 253, 0.28);
    --terminal-green: 133 84% 62%;
    --terminal-amber: 44 97% 58%;
    --terminal-blue: 186 86% 62%;
    --terminal-red: 0 78% 58%;
    --terminal-bg: 120 14% 8%;
  }

  *,
  *::before,
  *::after {
    box-sizing: border-box;
  }

  body {
    margin: 0;
    min-height: 100vh;
    background: radial-gradient(circle at 20% 20%, rgba(111, 164, 255, 0.12), transparent 28%),
      radial-gradient(circle at 85% 10%, rgba(152, 118, 255, 0.14), transparent 28%),
      radial-gradient(circle at 12% 70%, rgba(35, 190, 255, 0.1), transparent 28%),
      hsl(var(--background));
    color: hsl(var(--foreground));
    font-family: 'Geist Sans', 'Inter', system-ui, -apple-system, 'Segoe UI', sans-serif;
    font-weight: 400;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
  }

  h1,
  h2,
  h3,
  h4,
  h5,
  h6 {
    margin: 0;
    font-weight: 700;
    letter-spacing: -0.01em;
    color: hsl(var(--foreground));
  }

  h1 {
    font-size: clamp(2.4rem, 3vw + 1rem, 3.4rem);
    line-height: 1.05;
  }

  h2 {
    font-size: clamp(1.8rem, 2vw + 1rem, 2.4rem);
    line-height: 1.1;
  }

  h3 {
    font-size: clamp(1.35rem, 1vw + 1rem, 1.6rem);
    line-height: 1.2;
  }

  p {
    margin: 0;
    color: hsl(var(--muted-foreground));
  }

  ::selection {
    background: hsla(var(--primary), 0.16);
    color: hsl(var(--foreground));
  }
}

@layer components {
  .kdl-surface {
    @apply relative overflow-hidden rounded-[var(--radius-lg)] border bg-[hsl(var(--surface-1))]/90 text-foreground shadow-[var(--shadow-soft)] backdrop-blur;
    border-color: hsl(var(--border) / 0.7);
  }

  .kdl-card {
    @apply kdl-surface bg-[hsl(var(--card))]/95;
  }

  .kdl-glow::before {
    content: '';
    position: absolute;
    inset: -40%;
    background: radial-gradient(circle at 20% 20%, rgba(93, 95, 255, 0.15), transparent 40%),
      radial-gradient(circle at 70% 60%, rgba(21, 185, 255, 0.14), transparent 40%),
      radial-gradient(circle at 40% 80%, rgba(233, 121, 255, 0.12), transparent 40%);
    filter: blur(40px);
    opacity: 0.7;
    z-index: -1;
  }

  .focus-ring {
    box-shadow: var(--shadow-focus);
  }

  .gradient-text {
    @apply bg-gradient-to-r from-primary via-accent to-secondary bg-clip-text text-transparent drop-shadow-[0_12px_38px_rgba(79,70,229,0.18)];
  }

  .text-subtle {
    @apply text-sm text-muted-foreground;
  }

  .creator-editor .w-md-editor {
    background: radial-gradient(circle at 20% 20%, rgba(56, 189, 248, 0.06), transparent 35%),
      radial-gradient(circle at 80% 0%, rgba(168, 85, 247, 0.05), transparent 35%),
      hsl(var(--surface-1));
    border-color: rgba(255, 255, 255, 0.08);
    box-shadow: 0 15px 60px -35px rgba(94, 92, 255, 0.5);
    color: hsl(var(--foreground));
  }

  .creator-editor .w-md-editor-toolbar,
  .creator-editor .w-md-editor-preview,
  .creator-editor .w-md-editor-input,
  .creator-editor .w-md-editor-text-input {
    background: transparent;
    color: hsl(var(--foreground));
  }

  .creator-editor .w-md-editor-toolbar {
    border-color: rgba(255, 255, 255, 0.1);
  }

  .markdown-article {
    @apply max-w-none text-foreground;
  }

  .markdown-article pre {
    background: radial-gradient(circle at 12% 20%, rgba(79, 70, 229, 0.08), transparent 38%),
      radial-gradient(circle at 82% 10%, rgba(56, 189, 248, 0.08), transparent 34%),
      hsl(var(--surface-1));
    border: 1px solid hsl(var(--border) / 0.6);
    box-shadow: 0 24px 80px -46px rgba(15, 23, 42, 0.5), inset 0 1px 0 rgba(255, 255, 255, 0.04);
  }

  .markdown-article code {
    @apply rounded-md bg-muted/20 px-1.5 py-0.5 text-foreground;
  }

  .markdown-article .inline-code {
    @apply rounded-md bg-primary/10 px-1.5 py-0.5 text-[0.92rem] font-semibold text-primary;
  }

  .markdown-article blockquote {
    @apply border-l-4 border-primary/40 bg-primary/5 px-4 py-2 text-foreground;
  }

  .markdown-article table {
    @apply w-full border-collapse overflow-hidden rounded-xl border text-sm;
    border-color: hsl(var(--border) / 0.6);
  }

  .markdown-article th,
  .markdown-article td {
    @apply border px-3 py-2;
    border-color: hsl(var(--border) / 0.6);
  }

  .markdown-article a {
    @apply font-semibold text-primary underline decoration-primary/40 decoration-2 underline-offset-4 transition-colors hover:text-primary-soft;
  }
}

.token.comment {
  color: rgba(148, 163, 184, 0.9);
}

.token.string {
  color: #38bdf8;
}

.token.keyword {
  color: #c084fc;
}

.token.boolean,
.token.constant {
  color: #fbbf24;
}

.token.number {
  color: #34d399;
}

.token.function {
  color: #60a5fa;
}

.token.operator {
  color: #f472b6;
}
